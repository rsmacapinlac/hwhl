# InvoiceNinja Environment Configuration
# Generated by Ansible - customize before running site.yml
# Official docs: https://github.com/invoiceninja/dockerfiles/tree/debian

# Application
APP_URL={{ invoiceninja_app_url | default('https://invoiceninja.' + ansible_facts["hostname"] + '.' + homelab_domain) }}
# IMPORTANT: Generate APP_KEY before first run:
#   docker run --rm invoiceninja/invoiceninja-debian php artisan key:generate --show
APP_KEY={{ invoiceninja_app_key | default('REPLACE_ME_base64:...') }}
APP_ENV=production
APP_DEBUG=false

# Proxy configuration (Traefik handles SSL)
REQUIRE_HTTPS=false
TRUSTED_PROXIES='*'

# PDF generation
PHANTOMJS_PDF_GENERATION=false
PDF_GENERATOR=snappdf

# Cache / Queue / Session (Redis)
CACHE_DRIVER=redis
QUEUE_CONNECTION=redis
SESSION_DRIVER=redis
REDIS_HOST=redis
REDIS_PASSWORD=null
REDIS_PORT=6379

# Storage
FILESYSTEM_DISK=debian_docker

# Database
DB_HOST=mysql
DB_PORT=3306
DB_DATABASE=ninja
DB_USERNAME=ninja
DB_PASSWORD={{ invoiceninja_db_password | default('change_this_db_password') }}
DB_ROOT_PASSWORD={{ invoiceninja_db_root_password | default('change_this_root_password') }}
DB_CONNECTION=mysql

# MySQL container vars (must match DB_* values above)
MYSQL_ROOT_PASSWORD={{ invoiceninja_db_root_password | default('change_this_root_password') }}
MYSQL_USER=ninja
MYSQL_PASSWORD={{ invoiceninja_db_password | default('change_this_db_password') }}
MYSQL_DATABASE=ninja

# Initial admin user (used only on first startup)
IN_USER_EMAIL={{ invoiceninja_admin_email | default('admin@example.com') }}
IN_PASSWORD={{ invoiceninja_admin_password | default('change_this_admin_password') }}

# Mail
MAIL_MAILER={{ invoiceninja_mail_mailer | default('log') }}
MAIL_HOST={{ invoiceninja_mail_host | default('smtp.mailtrap.io') }}
MAIL_PORT={{ invoiceninja_mail_port | default('2525') }}
MAIL_USERNAME={{ invoiceninja_mail_username | default('null') }}
MAIL_PASSWORD={{ invoiceninja_mail_password | default('null') }}
MAIL_ENCRYPTION={{ invoiceninja_mail_encryption | default('null') }}
MAIL_FROM_ADDRESS={{ invoiceninja_mail_from_address | default('invoices@example.com') }}
MAIL_FROM_NAME='{{ invoiceninja_mail_from_name | default('InvoiceNinja') }}'

IS_DOCKER=true
SCOUT_DRIVER=null
